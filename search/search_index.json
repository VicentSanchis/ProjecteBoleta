{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Rescat a Pr\u00f2xima Centauri","text":""},{"location":"#introduccio","title":"Introducci\u00f3","text":"<p>El projecte Rescat a Pr\u00f2xima Centauri, \u00e9s un projecte per a aprendre a programar en Java utilitzant l\u2019entorn de desenvolupament Processing IDE on b\u00e0sicament simularem un joc tipus accelerador que es dividir\u00e0 en pantalles, enregistrar\u00e0 una puntuaci\u00f3 segons els nivells que es superen i els enemics que s\u2019eliminen a m\u00e9s a m\u00e9s de totes les funcions cl\u00e0ssiques d\u2019aquest tipus de joc.</p> <p> </p>"},{"location":"#consideracions-inicials","title":"Consideracions inicials","text":"<p>1. El joc: una nau de la federaci\u00f3 interestel\u00b7lar de comer\u00e7 ha d\u2019arribar de la terra a Plut\u00f3 per des d\u2019all\u00e0 i per mitj\u00e0 d\u2019un portal multidimensional, viatjar a el sistema \u00abAlpha Centauri\u00bb que es troba a 4,37 anys llum del sistema solar. En aquest sistema es troba el planeta \u00abPr\u00f2xima Centauri b\u00bb on es troba la base \u00abMinotaure\u00bb que ha sigut atacada per naus alien\u00edgenes. La nostra missi\u00f3 \u00e9s arribar sans i estalvis a les proximitats de la base per protegir-la.</p> <p>2. El personatge: es tracta d\u2019una nau espacial model T800X que per tal de no ser destru\u00efda es pot moure en les quatre direccions, disparar projectils o l\u00e0sers que destrueixen els enemics o desviar els meteorits. Aquesta nau t\u00e9 una vida limitada i es pot veure afectada pels projectils de les naus enemigues, pels camps de mines, o pels meteorits i altres obstacles que es pot trobar pel cam\u00ed. Cada impacte d\u2019algun d\u2019aquests elements restar\u00e0 vida a la nau, si el percentatge de vida arriba a zero, es perd la partida.</p> <p>3. Els enemics: ens podem trobar tres tipus d\u2019enemics diferents, els kamikaze que s\u00f3n enemics que no poden disparar per\u00f2 poden xocar contra nosaltres i llevar-nos vida, el fet de no poder disparar fa que aquests enemics siguen m\u00e9s r\u00e0pids i imprevisibles. Despr\u00e9s tenim els interceptors que disparen m\u00edssils amb m\u00e9s o menys freq\u00fc\u00e8ncia i que amb les col\u00b7lisions d\u2019aquests, resten vida al personatge. Finalment tamb\u00e9 tindrem els miners que s\u00f3n enemics que es dediquen a posar mines de forma aleat\u00f2ria per l\u2019espai, en cas de xocar contra algun d\u2019aquests enemics, tant la nostra nau com l\u2019enemic quedarien destru\u00efts produint una gran explosi\u00f3.</p> <p>4. Els monstres finals: com hem explicat abans, al final de cada fase apareixer\u00e0 un enemic de m\u00e9s entitat, els monstres finals de pantalla. En aquestes parts del joc s\u2019obrir\u00e0 una esp\u00e8cie de batalla final amb un enemic de m\u00e9s entitat al qual haurem de v\u00e8ncer si volem superar el nivell.</p> <p>5. Els acceleradors: s\u00f3n elements addicionals del joc que ajuden al nostre personatge. Podem trobar acceleradors que incrementen el nivell de vida, que incrementen la potencia del dispar o que donen algun tipus de protecci\u00f3 temporal a la nostra nau tipus escut.</p> <p>6. Els meteorits: obstacles neutres en forma de  roca que es mouen per l\u2019espai de forma aleat\u00f2ria. Si algun d\u2019aquestes roques xoca contra la nostra nau o contra un enemic, depenent de la seua capacitat de destrucci\u00f3 li llevar\u00e0 vida i modificar\u00e0 la seua traject\u00f2ria segons les lleis f\u00edsiques de les col\u00b7lisions.</p> <p>7. Les mines: objectes llen\u00e7ats per un tipus d\u2019enemic especial tipus miner. Aquest obstacle es mant\u00e9 est\u00e0tic a l\u2019escenari del nostre joc per\u00f2 s\u00f3n molt perilloses ja que si xoquem contra alguna d\u2019elles ens eliminar\u00e0 del joc.</p> <p>8. Els HUD (head-Up Display): tamb\u00e9 conegut com barra d\u2019estat. Mostra tota la informaci\u00f3 necess\u00e0ria durant la partida com per exemple: vides, punts, nivell, salut, armadura,  mini mapa entre altres..  En el nostre cas seria interessant mostrar la informaci\u00f3 de les vides restants del personatge principal, nivell o pantalla en el que es troba.</p> <p>9. Les fases: com hem explicat i basant-nos en el \u00abgui\u00f3\u00bb del nostre joc, el viatge de la nostra nau estar\u00e0 dividida en fases on cada pantalla tindr\u00e0 uns objectius distints.</p> <ul> <li>Nivell 1: Inici de l\u2019expedici\u00f3. Pantalla simple on l\u2019objectiu seria aprendre el funcionament de la nau. Com es mou, com disparar, que fan els acceleradors...</li> <li>Nivell 2: El camp de meteorits. Per arribar a Plut\u00f3 primer hem de passar pel cintur\u00f3 d\u2019asteroides que orbita pr\u00f2xim a J\u00fapiter. Ac\u00ed es posaran a prova les habilitats del nostre jugador i com de r\u00e0pid de reflexos \u00e9s per esquivar tots els possibles obstacles.</li> <li>Nivell 3: Arribada a Plut\u00f3. Quan ja hem superat els asteroides i hem arribat a Plut\u00f3 haurem de trobar el portal interestel\u00b7lar i accedir a ell.</li> <li>Nivell 4: Viatge interestel\u00b7lar. Viatjar per un forat de cuc no \u00e9s senzill ja que les velocitats s\u00f3n molt altes i ens podem trobar en obstacles imprevistos que s\u2019haurien d\u2019esquivar per\u00f2 sense perdre la traject\u00f2ria pr\u00e8viament calculada que es portaria en perdre'ns per la profunditat de l\u2019espai.</li> <li>Nivell 5: Arribada a Pr\u00f2xima Centauri. Finalitzat el viatge interestel\u00b7lar i arribats a les proximitats del planeta, hem de buscar la finestra d\u2019entrada m\u00e9s a prop de la base que est\u00e0 sent atacada. En aquest viatge apareixeran els primers enemics alien\u00edgenes que haurem de matar.</li> <li>Nivell 6: Primera l\u00ednia de protecci\u00f3. Quan ja hem trobat la finestra d\u2019entrada al planeta, ens trobarem amb la sorpresa que aquesta t\u00e9 un esquadr\u00f3 de naus enemics que vigilen per si de cas. Hem de destruir-les el m\u00e9s r\u00e0pid possible abans que avisen al quarter general i poder travessar la finestra.</li> <li>Nivell 7: Escut de defensa del planeta. Una vegada passada la finestra d\u2019entrada ens trobarem amb que el planeta est\u00e0 fortament defensat per un escut d\u2019enemics que intentaran destruir-nos abans que arribem pr\u00f2xims a la superf\u00edcie.</li> <li>Nivell 8: Viatge a la base. Superat l\u2019escut de defensa, hem d\u2019arribar a la base atacada.</li> <li>Nivell 9: El rescat de la base. Finalment ja nom\u00e9s ens quedaria alliberar la base de totes les naus alien\u00edgenes que l\u2019estan atacant per restablir la normalitat.</li> <li>Nivell 10: Lliure per a l'alumne.</li> </ul>"},{"location":"#desenvolupament-de-classes","title":"Desenvolupament de classes","text":"<p>La primera activitat que has de fer en aquest projecte \u00e9s una activitat molt b\u00e0sica i senzilla per comen\u00e7ar. Es tracta que basan-t en l'enunciat anterior identifiques les classes i crees el projecte amb tots aquells fitxers buits que el formaran en un futur.</p> Activitat P01. Identificaci\u00f3 de classes i estructura <p>\ud83d\udccc Analitzar el joc i identificar quins elements del joc es poden convertir en classes. Per exemple:</p> <ul> <li>Player</li> <li>Enemic</li> <li>Meteorit</li> <li>Accelerador</li> <li>HUD</li> <li>Dispar</li> </ul> <p>Objectiu: Documentar quines parts del joc serien classes, quin ser\u00e0 el seu estat i comportament.</p> <p>Entregable: Diagrama UML / llista amb atributs i m\u00e8todes previstos.</p> <p>Una vegada ja tenim l'estructura del nostre projecte passem a escriure el codi inicial de les classes, per\u00f2 com que no tenim pressa, seria millor que les classes de moment queden buides de codi</p> Activitat P02. Crear les classes <p>\ud83d\udccc Crear les classes buides identificades amb els seus atributs b\u00e0sics. Exemple:</p> <pre><code>public class Player {\n    int vida;\n    float posX, posY;\n    boolean viu;\n}\n</code></pre> <p>Objectiu: Assentar la base de classes del joc amb sintaxi correcta.</p> <p>Una vegada tenim aquestes activitats inicials ja realitzades, \u00e9s hora de passar a picar codi. A l'activitat seg\u00dcent comen\u00e7a a escriure els atributs i m\u00e8todes de les classes que hages decidit que ha de tindre el teu joc. En aquesta activitat \u00e9s molt important que tingues en compte el tipus de dades dels atributs, que s\u00f3n procediments i que s\u00f3n funcions i per tant quin \u00e9s el tipus de dades que haurien de retornar. </p> <p>No nom\u00e9s has de codificar les interf\u00edcies dels m\u00e8todes sino tamb\u00e9 algo de codi, encara que siga simple.</p> Activitat P03. Propietats i m\u00e8todes <p>\ud83c\udf1f Afegir funcionalitats simples a les classes:</p> <ul> <li>moure(), disparar() per NauPlayer</li> <li>despla\u00e7ar() per enemics o meteorits</li> <li>mostrar() per dibuixar-les</li> </ul> <p>Entregable: M\u00e8todes que modifiquen els atributs i retornen informaci\u00f3 de l\u2019estat de l\u2019objecte.</p> <p>Una vegada ja tenim els cossos b\u00e0sics de les nostre classes implementats, es hora de crear els constructors de les classes com hem vist al tema 6. Recorda que m\u00ednim serien necessaris el constructor per defecte i almenys un constructor parametritzat per classe.</p> <p>Aquest \u00e9s el pas previ a la instanciaci\u00f3 dels objectes i ja podrem comen\u00e7ar a veure quin \u00e9s el resultat de tot el treball fet fins ara.</p> Activitat P04. Constructors <p>\ud83d\udccc Implementar constructors a totes les classes. Exemple:</p> <pre><code>public NauPlayer(int vidaInicial, float x, float y) { \n    this.vida = vidaInicial;\n    this.posX = x;cionals del joc que ajuden al nostre personatge. Podem trobar acceleradors que incrementen el nivell de vida, que incrementen la potencia del dispar o que donen algun tipus de protecci\u00f3 temporal a la nostra nau tipus escut.\n\n    this.posY = y;\n}\n</code></pre> <p>Entregable: Constructors que inicialitzen objectes amb valors per defecte o personalitzats.</p> <p>Ja podem comen\u00e7ar a jugar amb els objectes que hem creat. A l'activitat seg\u00fcent posa en funcionament el programa mitjan\u00e7ant la creaci\u00f3 d'objectes i la interacci\u00f3 amb ells.</p> Activitat P05. Instanciaci\u00f3 d'objectes <p>\ud83d\udccc Crear objectes al main/loop de joc i usar els seus m\u00e8todes. Exemple:</p> <ul> <li>Crear 1 nau player</li> <li>Crear una llista d\u2019enemics</li> <li>Invocar moure(), mostrar() a cada fotograma</li> </ul> <p>Objectiu: Mostrar interacci\u00f3 real entre els objectes.</p> <p>All\u00f2 habitual \u00e9s que els modificadors de visibilitat s'escriguen al mateix temps que es creen les classes, atributs i m\u00e8todes per\u00f2 com que aquest projecte \u00e9s un projecte pedag\u00f2gic s'ha separat en dues activitats diferents, per\u00f2 a partir d'ara en totes les activitats i projectes que feu \u00e9s convenient que els modificadors de visibilitat es col\u00b7loquen al mateix temps i no despr\u00e9s (un desprop\u00f2sit).</p> Activitat P06. Visibilitat i encapsulaci\u00f3 <p>\ud83d\udccc Aplicar modificadors de visibilitat (private, public).</p> <ul> <li>Fer privats els atributs i exposar getters/setters si cal.</li> <li>Determinar qu\u00e8 ha de ser p\u00fablic i qu\u00e8 privat a cada classe.</li> </ul> <p>Entregable: Classes ben encapsulades, amb acc\u00e9s controlat.</p> <p>A continuaci\u00f3 anem a ampliar el nostre ventall d'enemics utilitzant el mecanisme de l'her\u00e8ncia des d'un punt de vista b\u00e0sic com hem vist al tema 6.</p> Activitat P07. Her\u00e8ncia i classes <p>\ud83d\udccc Fer que alguns tipus d\u2019enemics siguin subclasses d\u2019una classe base Enemic. Exemple:</p> <pre><code>public class EnemicKamikaze extends Enemic {\u2026}\npublic class EnemicInterceptor extends Enemic {\u2026}\n</code></pre> <p>Objectiu: Reutilitzar codi i especialitzar comportaments.</p> <p>Ara has d'incorporar la classe Fisica2D al teu projecte si consideres que pot ser \u00fatil i tamb\u00e9 afegir una nova classe, Utils per exemple amb all\u00f2 que consideres que podria ser interessant per al teu projecte. Marcador</p> Activitat P08. M\u00e8todes est\u00e0tics <p>\ud83d\udccc Crear utilitats comunes, p. ex.:</p> <ul> <li>Classe Util amb m\u00e8todes est\u00e0tics per calcular col\u00b7lisions</li> <li>Comptador de puntuacions globals</li> </ul> <p>Entregable: M\u00e8todes static que no depenen d\u2019inst\u00e0ncies.</p> <p>Quines interf\u00edcies consideres que es podrien adatpar al projecte \"Proxima Centauri\". Quines classes o quins objectes s\u00f3n susceptibles de tindre associada una interf\u00edcies.</p> Activitat P09. Interf\u00edcies <p>Definir interf\u00edcies com Movible, Destruible que puguin implemenMarcadortar classes com Enemic, Meteorito.</p> <p>Objectiu: Fer que diferents classes comparteixin comportament com\u00fa.</p> <p>Una de les caracter\u00edstiques m\u00e9s importants de la programaci\u00f3 orientada a objectes \u00e9s la reutilitzaci\u00f3 del codi. A continuaci\u00f3 incorporarem dues classes ja creades, Animator i Marcador, per un costat per poder animar els personatges del nostre joc i per l'altre per poder tindre un HUD m\u00e9s complet amb un marcador que mostra alguna informaci\u00f3 de l'estat del joc. </p>"},{"location":"#classe-animator-reutilitzacio-de-classes","title":"Classe Animator - Reutilitzaci\u00f3 de classes","text":"<p>Fins ara els elements que hem usat per fer el nostre joc de la boleta s\u00f3n figures geom\u00e8triques est\u00e0tiques el que fa que en general siga un poc avorrit. En aquest seg\u00fcent apartat aprendrem com convertir els nostres objectes en figures animades. Aprofitant una de les caracter\u00edstiques principals del paradigma de Programaci\u00f3 Orientada a Objectes, la reutilitzaci\u00f3 del codi, incorporarem una nova classe al nostre joc: la classe Animation que podeu descarregar Ac\u00ed. Aquesta classe ens permet mitjan\u00e7ant l'\u00fas de sprite sheets crear animacions per al nostre personatge com la seg\u00fcent:</p> <p> </p> <p>Utilitzar aquesta classe \u00e9s relativament senzill:</p> <ol> <li>Incorporem la classe al nostre projecte copiant-la a la mateixa carpeta com una classe pr\u00f2pia m\u00e9s.</li> <li>Declarem un atribut Animation a qualsevol classe del nostre projecte que volem animar.</li> <li>Al constructor de la classe que volem animar instanciem l'objecte animation seguint les instruccions de la classe.</li> </ol>"},{"location":"#exemple-dus-de-la-classe-animation","title":"Exemple d'\u00fas de la classe Animation","text":"<pre><code>Animation trump;\n\nvoid setup () {\n    size(200,200);\n    trump    = new Animation (\"Trump\", \"./img/trump_run.png\", 100, 100, 4, 6, 0);\n}\n\nvoid draw () {\n    clear();\n    background(235);\n\n    trump.display(new PVector(width/2,height/2),1,1);\n    trump.update();\n} \n</code></pre> <p>Senzill no? Per\u00f2 com aconseguim que la nostra boleta es convertisca en un personatge animat com el de l'exemple anterior? Hem d'afegir un nou atribut a la nostra classe Boleta, aquest nou membre s'instanciar\u00e0 al constructor de la classe Boleta i finalment al m\u00e8tode mostrar de la boleta \u00e9s on cridarem al m\u00e8tode display de l'animaci\u00f3, finalment al m\u00e8tode actualitza de la boleta \u00e9s des d'on cridarem al m\u00e8tode update de l'animaci\u00f3.</p> <p>Per\u00f2 abans d'anar per feina, observem b\u00e9 l'spritesheet:</p> <p> </p> <p>Amb el constructor amb el que hem instanciat el nostre objecte trump li indiquem els seg\u00fcents arguments:  - \"Trump\": etiqueta que s'utilitza per identificar els frames de l'animaci\u00f3. - \"./imt/trump_run.png\": ruta del nostre full d'sprites. - 100: ample de cada frame de l'animaci\u00f3 (cada Trumpet) - 100: alt de cada frame de l'animaci\u00f3 (cada Trumpet) - 4: files de l'sprite sheet0,5 0,5</p> <ul> <li>6: columnes de l'sprite sheet</li> <li>0: aquest argument ens indica si nom\u00e9s volem agafar una fila (nombre de la fila que volem) per full o totes les files (zero). Al nostre cas hem posta zero el que significa que volem que l'animaci\u00f3 carregue tots els frames de l'spritesheet.</li> </ul> <pre><code>    Animation trump = new Animation (\"Trump\", \"./img/trump_run.png\", 100, 100, 4, 6, 0);\n</code></pre> <p>Com he dit, el que hem fet ha sigut carregar tot l'sprite sheet en una sola animaci\u00f3 quan en realitat el que tenim \u00e9s un full d'sprites amb quatre animacions com mostra la seg\u00fcent imatge. Cada fila \u00e9s una animaci\u00f3 diferent.</p> <p> </p> <p>El que hauriem de fer per tant \u00e9s que la nostra classe Trump no tinga nom\u00e9s un atribut animation com fins ara sino que tinga quatre atributs de la classe Animation per a simular cadascun dels diferents moviments que pot fer el nostre personatge. Tamb\u00e9 necessitarem una \u00faltima animaci\u00f3 que ens servir\u00e0 per indicar quina \u00e9s l'animaci\u00f3 actual o la que s'estiga executant en un moment concret. Finalment ens quedaria implementar el codi necessari per que quan el personatge canvie de direcci\u00f3 ho faja tamb\u00e9 l'animaci\u00f3 que s'est\u00e0 executant. Aix\u00f2 ho fariem als diferents m\u00e8todes gira que hem implementat a la classe boleta.</p> <pre><code>// Teniu en compte que animAvall, animDreta, animAmunt, currentAnim s\u00f3n nous atributs de la classe Bola\nprivate void carregaAnimacions () {\n    this.animAvall    = new Animation (\"Trump\", \"./img/trump_run.png\", 100, 100, 4, 6, 1);\n    this.animDreta    = new Animation (\"Trump\", \"./img/trump_run.png\", 100, 100, 4, 6, 2);\n    this.animAmunt    = new Animation (\"Trump\", \"./img/trump_run.png\", 100, 100, 4, 6, 3);\n    this.animEsquerra = new Animation (\"Trump\", \"./img/trump_run.png\", 100, 100, 4, 6, 4);\n    this.currentAnim  = animAvall;\n}\n\npublic void giraDreta() {\n    this.direccio = new PVector(1,0);\n    this.currentAnim = animDreta;\n}\n\npublic void giraEsquerra() {    \n    this.direccio = new PVector(-1,0);\n    this.currentAnim = animEsquerra;\n}\n\npublic void giraDalt() {\n    this.direccio = new PVector(0,-1);\n    this.currentAnim = animAmunt;\n}\n\npublic void giraBaix () {\n    this.direccio = new PVector(0,1);\n    this.currentAnim = animAvall;\n}\n\n public void mostra () {\n    fill(pinta);\n    strokeWeight(1);0,5 0,5\n\n    this.currentAnim.display(posicio,1,1);\n}\n\npublic void actualitza() {\n    this.posicio.add(this.direccio.copy().mult(velocitat));\n    this.currentAnim.update();\n}\n</code></pre> <p>El resultat de les modificacions al codi anteriors seria el seg\u00fcent:</p> <p> </p>"},{"location":"#ampliacio-del-marcador","title":"Ampliaci\u00f3 del marcador","text":"<p>Per als pr\u00f2xims apartats d'aquest projecte s'ha ampliat la classe marcador i se li ha afegit una etiqueta extra i un compte enrere. Aquesta modificaci\u00f3 es per a poder usar elements tipus booster que acceleren al nostre personatge nom\u00e9s per un per\u00edode de temps. Se li ha afegit tamb\u00e9 un sistema d'alarmes com un array d'objectes JSON per poder afegir m\u00e9s d'una alarma a difer\u00e8ncia del que estava fent a l'activitat anterior. Observa el seg\u00fcent diagrama:</p> <p>         classDiagram         direction LR         Marcador: PVector posicio         Marcador: int ample         Marcador: int alt         Marcador: int currentTime         Marcador: int currentCountDown         Marcador: int countDownFlag         Marcador: int score         Marcador: String lblPuntsA         Marcador: String lblPuntsB         Marcador: String lblExtra         Marcador: int puntsA         Marcador: int puntsB         Marcador: JSONArray alarmes         Marcador: Marcador()         Marcador: Marcador(String strA, String strB)         Marcador: void mostra()         Marcador: void actualitza()         Marcador: void afegirAlarma(String text, int durada, boolean esRepeteix)         Marcador: ArrayList obtenirAlarmesDisparades()         Marcador: void sumaPuntsA()         Marcador: void sumaPuntsB()         Marcador: int getPuntsA()         Marcador: int getPuntsB()         Marcador: String getTime()         Marcador: setlblExtra(String lbl)         Marcador: setCountDown(int milis)         Marcador: incrementScore(int inr)         Marcador: String getTime()  </p> <p>Pots descarregar la nova versi\u00f3 ac\u00ed</p> <p>Per poder utilitzar la classe Marcador has de fer el mateix que has fet amb la classe Animation. Pots generar la documentaci\u00f3 amb javadoc per tindre un manual d'\u00fas m\u00e9s detallat.</p> Activitat P10. Col\u00b7leccion i llibreries de classes <p>\ud83d\udccc Utilitzar ArrayList, HashMap o altres col\u00b7leccions per gestionar conjunts d\u2019objectes del joc. Exemples:</p> <ul> <li>Llista d\u2019enemics ArrayList <li>Llista de projectils actius</li> <p>Objectiu: Aprendre a treballar amb conjunts d\u2019objectes i llMarcadoribreries de Java.    </p>"}]}